var stdin = process.stdin
	,	stdout = process.stdout
	,	keypress = require("keypress");

module.exports.getLine = function getLine(cb){
	stdin.resume();
	stdin.on("data", function(data){
		stdin.pause();
		stdin.removeAllListeners("data");
		cb(data.toString().trim());
	});
};

module.exports.getPassword = function getPassword(cb){
	var data = "";
	stdin.setRawMode(true);
	keypress(stdin);
	stdin.on("keypress", function(c, key){
		if(key && "enter" == key.name){
			stdin.pause();
			stdin.setRawMode(false);
			stdin.removeAllListeners("keypress");
			cb(data.toString().trim());
		}else if(key && key.ctrl && "c" == key.name){
			process.exit();
		}else{
			data += c;
		}
	}).resume();
}
