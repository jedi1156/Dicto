/**
	This one has to be improved in a way
	that will enable reloading files
	while app is running.
	*/
module.exports = (function(){
	var fs = require("fs")
		,	format = /[.]([^.]*)$/;
		
	function normalize(str){
		return str.replace(/\\/g, "/");
	}	
	
	function getFile(path){
		try{
			return fs.readFileSync(path, "utf8");
		}catch(err){
			return err;
		}
	}

	function jsonicatedFile(path){
		return {
			file: getFile(path)
		,	format: format.exec(path)[1] || ""
		};
	}
	
	function isArray(vArg){
		return Object.prototype.toString.call(vArg) === "[object Array]";
	}
	
	function JSONicate(arr, defaultPath){
		var i
			,	res = [];
		defaultPath = defaultPath || "";
		defaultPath = normalize(defaultPath);

		if(isArray(arr)){
			for(i = 0; i < arr.length; ++i){
				arr[i] = defaultPath + normalize(arr[i]);
				res[i] = jsonicatedFile(arr[i]);
			}
		}else if(typeof arr === "string"){
			res[0] = jsonicatedFile(defaultPath + normalize(arr));
		}
		
		return res;
	}
	
	return JSONicate;
})();